{"remainingRequest":"/Users/carol/Documents/ptcg_account_web/node_modules/babel-loader/lib/index.js!/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/carol/Documents/ptcg_account_web/src/views/SettlementRecrod.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/carol/Documents/ptcg_account_web/src/views/SettlementRecrod.vue","mtime":1622983223455},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js","mtime":1617010042632},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/babel-loader/lib/index.js","mtime":1617010042638},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js","mtime":1617010042632},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js","mtime":1617010052190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9jYXJvbC9Eb2N1bWVudHMvcHRjZ19hY2NvdW50X3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9jYXJvbC9Eb2N1bWVudHMvcHRjZ19hY2NvdW50X3dlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvY2Fyb2wvRG9jdW1lbnRzL3B0Y2dfYWNjb3VudF93ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVNldHRsZW1lbnQ6IGZ1bmN0aW9uIHVwZGF0ZVNldHRsZW1lbnQoKSB7CiAgICAgIHZhciBwYXJhbXMgPSBbXTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLnNldHRsZW1lbnRzKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ZW0gPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBpZiAoaXRlbS5zdGF0dXMgPT09ICJ1bnNldHRsZW1lbnQiKSB7CiAgICAgICAgICAgIHBhcmFtcy5wdXNoKHsKICAgICAgICAgICAgICB5ZWFyOiBpdGVtLnllYXIsCiAgICAgICAgICAgICAgbW9udGg6IGl0ZW0ubW9udGgKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgIH0KCiAgICAgIGlmIChwYXJhbXMubGVuZ3RoID09IDApIHJldHVybjsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZVNldHRsZW1lbnQiLCBwYXJhbXMpOwogICAgfSwKICAgIGRldGFpbFNldHRsZW1lbnQ6IGZ1bmN0aW9uIGRldGFpbFNldHRsZW1lbnQoeWVhciwgbW9udGgsIHN0YXR1cykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogInNldHRsZW1lbnQtZGV0YWlsIiwKICAgICAgICBxdWVyeTogewogICAgICAgICAgeWVhcjogeWVhciwKICAgICAgICAgIG1vbnRoOiBtb250aCwKICAgICAgICAgIHN0YXR1czogc3RhdHVzCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgc2V0dGxlbWVudHM6ICJzZXR0bGVtZW50cyIKICB9KSksIHt9LCB7CiAgICB0b3RhbFNvbGQ6IGZ1bmN0aW9uIHRvdGFsU29sZCgpIHsKICAgICAgdmFyIHJlc3VsdCA9IDA7CgogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuc2V0dGxlbWVudHMpLAogICAgICAgICAgX3N0ZXAyOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHNldHRsZW1lbnQgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICByZXN1bHQgKz0gc2V0dGxlbWVudC5zb2xkOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yMi5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgdG90YWxQdXJjaGFzZTogZnVuY3Rpb24gdG90YWxQdXJjaGFzZSgpIHsKICAgICAgdmFyIHJlc3VsdCA9IDA7CgogICAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuc2V0dGxlbWVudHMpLAogICAgICAgICAgX3N0ZXAzOwoKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgdmFyIHNldHRsZW1lbnQgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICByZXN1bHQgKz0gc2V0dGxlbWVudC5wdXJjaGFzZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogIH0pLAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJxdWVyeVNldHRsZW1lbnRzIik7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfQp9Ow=="},{"version":3,"sources":["SettlementRecrod.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,UAAA,MAAA,GAAA,EAAA;;AADA,iDAEA,KAAA,WAFA;AAAA;;AAAA;AAEA,4DAAA;AAAA,cAAA,IAAA;;AACA,cAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,YAAA,MAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA,IAAA,CAAA,IAAA;AAAA,cAAA,KAAA,EAAA,IAAA,CAAA;AAAA,aAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;;AAOA,UAAA,MAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AAEA,WAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,EAAA,MAAA;AACA,KAXA;AAYA,IAAA,gBAZA,4BAYA,IAZA,EAYA,KAZA,EAYA,MAZA,EAYA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,mBADA;AAEA,QAAA,KAAA,EAAA;AAAA,UAAA,IAAA,EAAA,IAAA;AAAA,UAAA,KAAA,EAAA,KAAA;AAAA,UAAA,MAAA,EAAA;AAAA;AAFA,OAAA;AAIA;AAjBA,GADA;AAoBA,EAAA,QAAA,kCACA,UAAA,CAAA;AACA,IAAA,WAAA,EAAA;AADA,GAAA,CADA;AAIA,IAAA,SAJA,uBAIA;AACA,UAAA,MAAA,GAAA,CAAA;;AADA,kDAEA,KAAA,WAFA;AAAA;;AAAA;AAEA,+DAAA;AAAA,cAAA,UAAA;AACA,UAAA,MAAA,IAAA,UAAA,CAAA,IAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;;AAKA,aAAA,MAAA;AACA,KAVA;AAWA,IAAA,aAXA,2BAWA;AACA,UAAA,MAAA,GAAA,CAAA;;AADA,kDAEA,KAAA,WAFA;AAAA;;AAAA;AAEA,+DAAA;AAAA,cAAA,UAAA;AACA,UAAA,MAAA,IAAA,UAAA,CAAA,QAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;;AAKA,aAAA,MAAA;AACA;AAjBA,IApBA;AAuCA,EAAA,OAvCA,qBAuCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,kBAAA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAzCA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex\">\n      <h3>結算紀錄</h3>\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" depressed @click=\"updateSettlement\"\n        >更新結算</v-btn\n      >\n    </div>\n    <div class=\"d-flex mt-4\">\n      <v-card class=\"d-flex flex-grow-1 flex-column mr-1\" height=\"150px\">\n        <v-card-text style=\"position: absolute;\">\n          <h2>總成本</h2>\n        </v-card-text>\n        <v-card-text class=\"d-flex flex-grow-1 justify-center align-center\">\n          <h1>$ {{ totalPurchase }}</h1>\n        </v-card-text>\n      </v-card>\n      <v-card class=\"d-flex flex-grow-1 ml-1 flex-column\">\n        <v-card-text style=\"position: absolute;\">\n          <h2>總利潤</h2>\n        </v-card-text>\n        <v-card-text class=\"d-flex flex-grow-1 justify-center align-center\">\n          <h1>$ {{ totalSold }}</h1>\n        </v-card-text>\n      </v-card>\n    </div>\n    <v-list>\n      <v-list-item\n        @click=\"detailSettlement(item.year, item.month, item.status)\"\n        class=\"pr-10 pl-10 mb-2\"\n        style=\"box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.25);height: 96px;\"\n        v-for=\"(item, index) of settlements\"\n        :key=\"index\"\n      >\n        <v-list-item-content>\n          <v-list-item-title\n            >{{ item.year }} / {{ item.month }}\n            <v-chip class=\"ml-2\" small color=\"#565656\" text-color=\"white\">\n              <span v-if=\"item.status === 'unsettlement'\">未結算</span>\n              <span v-else>已結算</span>\n            </v-chip>\n          </v-list-item-title>\n        </v-list-item-content>\n        <v-list-item-content>\n          <v-list-item-title>利潤 {{ item.sold }} </v-list-item-title>\n        </v-list-item-content>\n        <v-list-item-content>\n          <v-list-item-title>成本 {{ item.purchase }} </v-list-item-title>\n        </v-list-item-content>\n      </v-list-item>\n    </v-list>\n  </div>\n</template>\n<script>\n  import { mapGetters } from \"vuex\";\n  export default {\n    methods: {\n      updateSettlement() {\n        const params = [];\n        for (const item of this.settlements) {\n          if (item.status === \"unsettlement\") {\n            params.push({ year: item.year, month: item.month });\n          }\n        }\n        if (params.length == 0) return;\n\n        this.$store.dispatch(\"updateSettlement\", params);\n      },\n      detailSettlement(year, month, status) {\n        this.$router.push({\n          path: \"settlement-detail\",\n          query: { year, month, status },\n        });\n      },\n    },\n    computed: {\n      ...mapGetters({\n        settlements: \"settlements\",\n      }),\n      totalSold() {\n        let result = 0;\n        for (const settlement of this.settlements) {\n          result += settlement.sold;\n        }\n        return result;\n      },\n      totalPurchase() {\n        let result = 0;\n        for (const settlement of this.settlements) {\n          result += settlement.purchase;\n        }\n        return result;\n      },\n    },\n    async mounted() {\n      await this.$store.dispatch(\"querySettlements\");\n    },\n  };\n</script>\n"],"sourceRoot":"src/views"}]}
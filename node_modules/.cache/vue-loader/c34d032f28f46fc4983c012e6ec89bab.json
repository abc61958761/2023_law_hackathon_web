{"remainingRequest":"/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/carol/Documents/ptcg_account_web/src/views/SettlementRecrod.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/carol/Documents/ptcg_account_web/src/views/SettlementRecrod.vue","mtime":1620783259097},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js","mtime":1617010042632},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/babel-loader/lib/index.js","mtime":1617010042638},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js","mtime":1617010042632},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js","mtime":1617010052190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVNldHRsZW1lbnQoKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IFtdOwogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5zZXR0bGVtZW50cykgewogICAgICAgIGlmIChpdGVtLnN0YXR1cyA9PT0gInVuc2V0dGxlbWVudCIpIHsKICAgICAgICAgIHBhcmFtcy5wdXNoKHsgeWVhcjogaXRlbS55ZWFyLCBtb250aDogaXRlbS5tb250aCB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHBhcmFtcy5sZW5ndGggPT0gMCkgcmV0dXJuOwoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVwZGF0ZVNldHRsZW1lbnQiLCBwYXJhbXMpOwogICAgfSwKICAgIGRldGFpbFNldHRsZW1lbnQoeWVhciwgbW9udGgsIHN0YXR1cykgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogInNldHRsZW1lbnQtZGV0YWlsIiwKICAgICAgICBxdWVyeTogeyB5ZWFyLCBtb250aCwgc3RhdHVzIH0sCiAgICAgIH0pOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgc2V0dGxlbWVudHM6ICJzZXR0bGVtZW50cyIsCiAgICB9KSwKICAgIHRvdGFsU29sZCgpIHsKICAgICAgbGV0IHJlc3VsdCA9IDA7CiAgICAgIGZvciAoY29uc3Qgc2V0dGxlbWVudCBvZiB0aGlzLnNldHRsZW1lbnRzKSB7CiAgICAgICAgcmVzdWx0ICs9IHNldHRsZW1lbnQuc29sZDsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHRvdGFsUHVyY2hhc2UoKSB7CiAgICAgIGxldCByZXN1bHQgPSAwOwogICAgICBmb3IgKGNvbnN0IHNldHRsZW1lbnQgb2YgdGhpcy5zZXR0bGVtZW50cykgewogICAgICAgIHJlc3VsdCArPSBzZXR0bGVtZW50LnB1cmNoYXNlOwogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJxdWVyeVNldHRsZW1lbnRzIik7CiAgfSwKfTsK"},{"version":3,"sources":["SettlementRecrod.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SettlementRecrod.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex\">\n      <h3>結算紀錄</h3>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"updateSettlement\">更新結算</v-btn>\n    </div>\n    <div class=\"d-flex mt-4\">\n      <v-card class=\"d-flex flex-grow-1 flex-column mr-1\" height=\"150px\">\n        <v-card-text style=\"position: absolute;\">\n          <h2>總成本</h2>\n        </v-card-text>\n        <v-card-text class=\"d-flex flex-grow-1 justify-center align-center\">\n          <h1>$ {{ totalPurchase }}</h1>\n        </v-card-text>\n      </v-card>\n      <v-card class=\"d-flex flex-grow-1 ml-1 flex-column\">\n        <v-card-text style=\"position: absolute;\">\n          <h2>總利潤</h2>\n        </v-card-text>\n        <v-card-text class=\"d-flex flex-grow-1 justify-center align-center\">\n          <h1>$ {{ totalSold }}</h1>\n        </v-card-text>\n      </v-card>\n    </div>\n    <v-list>\n      <v-list-item\n        @click=\"detailSettlement(item.year, item.month, item.status)\"\n        class=\"pr-10 pl-10 mb-2\"\n        style=\"box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.25);height: 96px;\"\n        v-for=\"(item, index) of settlements\"\n        :key=\"index\"\n      >\n        <v-list-item-content>\n          <v-list-item-title\n            >{{ item.year }} / {{ item.month }}\n            <v-chip class=\"ml-2\" small color=\"#565656\" text-color=\"white\">\n              <span v-if=\"item.status === 'unsettlement'\">未結算</span>\n              <span v-else>已結算</span>\n            </v-chip>\n          </v-list-item-title>\n        </v-list-item-content>\n        <v-list-item-content>\n          <v-list-item-title>利潤 {{ item.sold }} </v-list-item-title>\n        </v-list-item-content>\n        <v-list-item-content>\n          <v-list-item-title>成本 {{ item.purchase }} </v-list-item-title>\n        </v-list-item-content>\n      </v-list-item>\n    </v-list>\n  </div>\n</template>\n<script>\n  import { mapGetters } from \"vuex\";\n  export default {\n    methods: {\n      updateSettlement() {\n        const params = [];\n        for (const item of this.settlements) {\n          if (item.status === \"unsettlement\") {\n            params.push({ year: item.year, month: item.month });\n          }\n        }\n        if (params.length == 0) return;\n\n        this.$store.dispatch(\"updateSettlement\", params);\n      },\n      detailSettlement(year, month, status) {\n        this.$router.push({\n          path: \"settlement-detail\",\n          query: { year, month, status },\n        });\n      },\n    },\n    computed: {\n      ...mapGetters({\n        settlements: \"settlements\",\n      }),\n      totalSold() {\n        let result = 0;\n        for (const settlement of this.settlements) {\n          result += settlement.sold;\n        }\n        return result;\n      },\n      totalPurchase() {\n        let result = 0;\n        for (const settlement of this.settlements) {\n          result += settlement.purchase;\n        }\n        return result;\n      },\n    },\n    async mounted() {\n      await this.$store.dispatch(\"querySettlements\");\n    },\n  };\n</script>\n"]}]}
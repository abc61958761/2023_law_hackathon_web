{"remainingRequest":"/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/carol/Documents/ptcg_account_web/src/components/dialog/AddCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/carol/Documents/ptcg_account_web/src/components/dialog/AddCard.vue","mtime":1619057230495},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/babel-loader/lib/index.js","mtime":1617010042638},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/cache-loader/dist/cjs.js","mtime":1617010042632},{"path":"/Users/carol/Documents/ptcg_account_web/node_modules/vue-loader/lib/index.js","mtime":1617010052190}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJvcGVuRGlhbG9nIl0sCiAgZGF0YTogKCkgPT4gewogICAgcmV0dXJuIHsKICAgICAgbmV3Q2FyZDogIiIsCiAgICAgIHRlbXBQb2tlbW9uczoge30sCiAgICAgIHNlYXJjaFBva2Vtb246ICIiLAogICAgICBpc1NlYXJjaDogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoewogICAgICBwb2tlbW9uczogInBva2Vtb25zIiwKICAgIH0pLAogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgYWRkQ2FyZEFjdGlvbigpIHsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNyZWF0ZVBva2Vtb24iLCB7IG5hbWU6IHRoaXMubmV3Q2FyZCB9KTsKICAgICAgdGhpcy5uZXdDYXJkID0gIiI7CiAgICB9LAogICAgY2xvc2VEaWFsb2dBY3Rpb24oKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlRGlhbG9nIik7CiAgICB9LAogICAgZWRpdFBva2Vtb25BY3Rpb24ocG9rZW1vbikgewogICAgICB0aGlzLnRlbXBQb2tlbW9uc1twb2tlbW9uLmlkXSA9IHBva2Vtb24ubmFtZTsKICAgICAgcG9rZW1vbi5pc0VkaXQgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbEVkaXRQb2tlbW9uQWN0aW9uKHBva2Vtb24pIHsKICAgICAgcG9rZW1vbi5uYW1lID0gdGhpcy50ZW1wUG9rZW1vbnNbcG9rZW1vbi5pZF07CiAgICAgIGRlbGV0ZSB0aGlzLnRlbXBQb2tlbW9uc1twb2tlbW9uLmlkXTsKCiAgICAgIHBva2Vtb24uaXNFZGl0ID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgdXBkYXRlUG9rZW1vbkFjdGlvbihwb2tlbW9uKSB7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVQb2tlbW9uIiwgewogICAgICAgIGlkOiBwb2tlbW9uLmlkLAogICAgICAgIG5hbWU6IHBva2Vtb24ubmFtZSwKICAgICAgfSk7CgogICAgICBkZWxldGUgdGhpcy50ZW1wUG9rZW1vbnNbcG9rZW1vbi5pZF07CgogICAgICBwb2tlbW9uLmlzRWRpdCA9IGZhbHNlOwogICAgfSwKICAgIGFzeW5jIHF1ZXJ5UG9rZW1vbnMoKSB7CiAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJxdWVyeVBva2Vtb25zIiwgewogICAgICAgIG5hbWU6IHRoaXMuc2VhcmNoUG9rZW1vbiwKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgY2FuY2VsU2VhcmNoUG9rZW1vbkFjdGlvbigpIHsKICAgICAgdGhpcy5pc1NlYXJjaCA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMuc2VhcmNoUG9rZW1vbikgewogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJxdWVyeVBva2Vtb25zIik7CiAgICAgICAgdGhpcy5zZWFyY2hQb2tlbW9uID0gIiI7CiAgICAgIH0KICAgIH0sCiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInF1ZXJ5UG9rZW1vbnMiKTsKICB9LAogIHVwZGF0ZWQoKSB7CiAgICBpZiAodGhpcy5pc1NlYXJjaCkgewogICAgICB0aGlzLiRyZWZzLnNlYXJjaFBva2Vtb24uJGVsLnF1ZXJ5U2VsZWN0b3IoImlucHV0IikuZm9jdXMoKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["AddCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCard.vue","sourceRoot":"src/components/dialog","sourcesContent":["<template>\n  <v-dialog\n    v-model=\"openDialog\"\n    transition=\"dialog-bottom-transition\"\n    fullscreen\n  >\n    <v-card\n      style=\"flex: 1;\n          display: flex;\n          flex-direction: column;\n          height: 100%;\n          overflow: hidden;\n      \"\n    >\n      <v-card-title class=\"headline grey lighten-2\">\n        卡片登錄\n      </v-card-title>\n      <v-container\n        style=\"height: 100%;\n          display: flex;\n          overflow: hidden;\"\n      >\n        <v-card-text\n          style=\"display: flex;flex-direction: column;\"\n        >\n          <div style=\"display: flex; align-items: center\" class=\"mb-2\">\n            <v-text-field\n              dense\n              outlined\n              hide-details\n              label=\"品項命名\"\n              class=\"mr-4\"\n              v-model=\"newCard\"\n            ></v-text-field>\n            <v-btn @click=\"addCardAction\">新增</v-btn>\n          </div>\n          <v-subheader>\n            卡片名稱\n            <v-spacer></v-spacer>\n            <v-text-field\n              style=\"max-width: 300px\"\n              v-if=\"isSearch\"\n              dense\n              hide-details\n              v-model=\"searchPokemon\"\n              @keyup=\"queryPokemons\"\n              @blur=\"isSearch = false\"\n              ref=\"searchPokemon\"\n            ></v-text-field>\n            <v-btn icon v-if=\"isSearch\" @click=\"cancelSearchPokemonAction\">\n              <v-icon color=\"grey lighten-1\">mdi-close</v-icon>\n            </v-btn>\n            <v-btn icon v-if=\"!isSearch\" @click=\"isSearch = true\">\n              <v-icon color=\"grey lighten-1\">mdi-magnify</v-icon>\n            </v-btn>\n          </v-subheader>\n\n          <v-divider></v-divider>\n          <v-list dense class=\"pa-0\" style=\"overflow: auto\">\n            <v-list-item\n              v-for=\"pokemon of pokemons\"\n              dense\n              :key=\"pokemon.id\"\n              style=\"border-bottom: 1px solid rgba(0, 0, 0, 0.12)\"\n            >\n              <v-list-item-content>\n                <v-list-item-title v-if=\"!pokemon.isEdit\">\n                  {{ pokemon.name }}\n                </v-list-item-title>\n                <v-text-field\n                  v-else\n                  dense\n                  hide-details\n                  class=\"mr-4\"\n                  v-model=\"pokemon.name\"\n                ></v-text-field>\n              </v-list-item-content>\n\n              <v-list-item-action>\n                <div>\n                  <v-btn\n                    color=\"red\"\n                    icon\n                    v-if=\"pokemon.isEdit\"\n                    @click=\"cancelEditPokemonAction(pokemon)\"\n                  >\n                    <v-icon>mdi-close-thick</v-icon>\n                  </v-btn>\n                  <v-btn\n                    color=\"green\"\n                    icon\n                    v-if=\"pokemon.isEdit\"\n                    @click=\"updatePokemonAction(pokemon)\"\n                  >\n                    <v-icon>mdi-check-bold</v-icon>\n                  </v-btn>\n                  <v-btn\n                    color=\"blue\"\n                    icon\n                    v-else\n                    @click=\"editPokemonAction(pokemon)\"\n                  >\n                    <v-icon>mdi-pencil</v-icon>\n                  </v-btn>\n                </div>\n              </v-list-item-action>\n            </v-list-item>\n          </v-list>\n        </v-card-text>\n\n        <v-card-actions style=\"position: fixed; bottom: 0px; right: 0px;\">\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" @click=\"closeDialogAction\">\n            關閉\n          </v-btn>\n        </v-card-actions>\n      </v-container>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\n  import { mapGetters } from \"vuex\";\n\n  export default {\n    props: [\"openDialog\"],\n    data: () => {\n      return {\n        newCard: \"\",\n        tempPokemons: {},\n        searchPokemon: \"\",\n        isSearch: false,\n      };\n    },\n    computed: {\n      ...mapGetters({\n        pokemons: \"pokemons\",\n      }),\n    },\n    methods: {\n      async addCardAction() {\n        await this.$store.dispatch(\"createPokemon\", { name: this.newCard });\n        this.newCard = \"\";\n      },\n      closeDialogAction() {\n        this.$emit(\"closeDialog\");\n      },\n      editPokemonAction(pokemon) {\n        this.tempPokemons[pokemon.id] = pokemon.name;\n        pokemon.isEdit = true;\n      },\n      cancelEditPokemonAction(pokemon) {\n        pokemon.name = this.tempPokemons[pokemon.id];\n        delete this.tempPokemons[pokemon.id];\n\n        pokemon.isEdit = false;\n      },\n      async updatePokemonAction(pokemon) {\n        await this.$store.dispatch(\"updatePokemon\", {\n          id: pokemon.id,\n          name: pokemon.name,\n        });\n\n        delete this.tempPokemons[pokemon.id];\n\n        pokemon.isEdit = false;\n      },\n      async queryPokemons() {\n        await this.$store.dispatch(\"queryPokemons\", {\n          name: this.searchPokemon,\n        });\n      },\n      async cancelSearchPokemonAction() {\n        this.isSearch = false;\n\n        if (this.searchPokemon) {\n          await this.$store.dispatch(\"queryPokemons\");\n          this.searchPokemon = \"\";\n        }\n      },\n    },\n    async mounted() {\n      await this.$store.dispatch(\"queryPokemons\");\n    },\n    updated() {\n      if (this.isSearch) {\n        this.$refs.searchPokemon.$el.querySelector(\"input\").focus();\n      }\n    },\n  };\n</script>\n"]}]}